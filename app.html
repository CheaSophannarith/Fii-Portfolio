<!DOCTYPE html>
<html {{ HTML_ATTRS }}>
  <head {{ HEAD_ATTRS }}>
    <style>
      /* Prevent flash by setting dark background immediately */
      html.dark {
        background-color: rgb(17, 24, 39);
        color: rgb(248, 250, 252);
      }
      html:not(.dark) {
        background-color: rgb(255, 255, 255);
        color: rgb(15, 23, 42);
      }
    </style>
    <script>
      // Immediately apply dark mode to prevent flash
      (function () {
        try {
          const storageKey = 'nuxt-color-mode'
          const preference = localStorage.getItem(storageKey) || 'dark'
          const htmlElement = document.documentElement

          // Set class
          if (preference === 'dark') {
            htmlElement.classList.add('dark')
          } else {
            htmlElement.classList.remove('dark')
          }

          // Set data attribute
          htmlElement.setAttribute('data-theme', preference)
        } catch (e) {
          // Fallback to dark mode if localStorage is not available
          document.documentElement.classList.add('dark')
          document.documentElement.setAttribute('data-theme', 'dark')
        }
      })()
    </script>
    {{ HEAD }}
  </head>
  <body {{ BODY_ATTRS }}>
    {{ APP }}
  </body>
</html>
